{"version":3,"sources":["./src/app/public/tabsfolder/tab3/tab3.page.html","./src/app/public/tabsfolder/tab3/tab3.module.ts","./src/app/public/tabsfolder/tab3/tab3.page.scss","./src/app/public/tabsfolder/tab3/tab3.page.ts"],"names":[],"mappings":"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","file":"tab3-tab3-module-es5.js","sourcesContent":["module.exports = \"<ion-content>\\n\\n  <form [formGroup]=\\\"directionForm\\\" >\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Destination</ion-label>\\n      <ion-input formControlName=\\\"destination\\\"></ion-input>\\n    </ion-item>\\n    <ion-button (click) = \\\"calculateAndDisplayRoute()\\\" type=\\\"submit\\\" [disabled]=\\\"!directionForm.valid\\\">Get Direction</ion-button>\\n    <ion-button (click) = \\\"calculateAndDisplayRouteN()\\\"  type=\\\"submit\\\" [disabled]=\\\"!directionForm.valid\\\">Get waypoint Direction </ion-button>\\n  </form>\\n\\n\\n\\n<div #gmap class=\\\"map\\\" style=\\\"width:100%;height:100%\\\"></div>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\n\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\n\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [Tab3Page],\n  providers: [ Geolocation ]\n\n})\nexport class Tab3PageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3B1YmxpYy90YWJzZm9sZGVyL3RhYjMvdGFiMy5wYWdlLnNjc3MifQ== */\"","import { AfterViewInit, Component, ElementRef, OnInit, ViewChild} from '@angular/core';\n//import { } from '@google/maps';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\nimport { GeoService } from '../../../geo.service';\n\n\ndeclare var google;\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: './tab3.page.html',\n  styleUrls: ['./tab3.page.scss'],\n})\nexport class Tab3Page implements OnInit {\n\n\n  @ViewChild('gmap', {static:false}) gmapElement: ElementRef;\n  directionsService = new google.maps.DirectionsService;\n  directionsRenderer = new google.maps.DirectionsRenderer;\n  directionForm: FormGroup;\n  currentLocation: any = {\n    lat: 31.9753,\n    lng: 35.1960\n  };\n  markers: any;\n  subscription: any;\n  points: any;\n   map:any;\n\n\n  constructor(private fb: FormBuilder,private geolocation: Geolocation,private geo: GeoService) {\n    this.createDirectionForm();\n  }\n\n  createDirectionForm() {\n    this.directionForm = this.fb.group({\n      destination: ['', Validators.required]\n    });\n  }\n\n  ngAfterViewInit():void{\n  \n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.currentLocation.lat = resp.coords.latitude;\n      this.currentLocation.lng = resp.coords.longitude;\n   \n  });\n  const mapOptions = {\n    zoom:10,\n    center: this.currentLocation//chicago\n  }\n  this.map = new google.maps.Map(this.gmapElement.nativeElement,mapOptions);\n  console.log(\"lat= \",this.currentLocation.lat,\"lng = \",this.currentLocation.lng);\n    console.log(\"i will display\");\n\n\n    \n    this.directionsRenderer.setMap(this.map);\n\n \n   \n    console.log(\"finished disp\");\n  }\n\n  calculateAndDisplayRouteN() {\n    this.findWaypoints();\n\n    const that = this;\n    console.log(\"im here\");\n    this.directionsService.route({\n      origin: this.currentLocation,\n      destination: this.directionForm.value.destination, //{lat:32.2227, lng:35.2621},\n     \n     waypoints:[\n      {location: {lat:31.9038, lng:35.2034}, stopover: true},\n      {location: {lat:31.7683, lng:35.2137}, stopover: true},\n    ],\n      //destination: formValues.destination,\n      travelMode: 'DRIVING'\n    }, (response, status) => {\n      if (status === 'OK') {\n        that.directionsRenderer.setDirections(response);\n      } else {\n        window.alert('Directions request failed due to ' + status);\n      }\n    });\n    console.log(\"fineshed\");\n  }\n\n  findWaypoints(){\n\n    this.getUserLocation();\n    this.subscription = this.geo.hits\n        .subscribe(hits => this.markers = hits);\n\n    //let marker = new Array( this.markers.length);\n    //let marker;\n    console.log(\"my markers1 = \",this.markers);\n    let i=0 ;\n    for(i =0; i< this.markers.length;i++){\n      // add marker to the map at the point from the database.\n      let marker = new google.maps.Marker({\n        position: {lat:this.markers[i].location[0], lng:this.markers[i].location[1]},\n        map: this.map,\n        clickable: true\n      }); \n      // adding info window to each marker.   \n      marker.infowindow = new google.maps.InfoWindow({\n        content: \"you are \"+Math.round(this.markers[i].distance) +\"KM from this point\" ,\n        maxWidth: 400\n      });\n\n      google.maps.event.addListener(marker, 'click', function(){\n        marker.infowindow.open(this.map, marker);\n      });\n      // marker.addListener('click', function() {\n      //   marker.infowindow.open(this.map, marker[i]);\n      // });\n    }\n    \n  }\n\n  calculateAndDisplayRoute() {\n\n    this.findWaypoints();\n\n    console.log(\"value = \", this.directionForm.value);\n    const that = this;\n    console.log(\"im here\");\n    this.directionsService.route({\n      origin: this.currentLocation,\n      destination: this.directionForm.value.destination, //{lat:32.2227, lng:35.2621},\n      //destination: formValues.destination,\n      travelMode: 'DRIVING'\n    }, (response, status) => {\n      if (status === 'OK') {\n        that.directionsRenderer.setDirections(response);\n      } else {\n        window.alert('Directions request failed due to ' + status);\n      }\n    });\n    console.log(\"fineshed\");\n  }\n  \n  ngOnInit(){\n    this.getUserLocation();\n    this.subscription = this.geo.hits\n        .subscribe(hits => this.markers = hits);\n\n    let marker; \n    this.markers.forEach(element => {\n       marker = new google.maps.Marker({\n         position: {lat:element.location[0], lng:element.location[1]},\n         map: this.map,\n       }); \n     });\n\n    console.log(\"my markers = \",this.markers);\n    \n  }\n\n  private getUserLocation() {\n    /// locate the user\n    if (navigator.geolocation) {\n       navigator.geolocation.getCurrentPosition(position => {\n        this.currentLocation.lat = position.coords.latitude;\n        this.currentLocation.lng = position.coords.longitude;\n \n        this.geo.getLocations(100, [this.currentLocation.lat, this.currentLocation.lng]);\n \n      });\n    }\n  }\n \n}\n"],"sourceRoot":""}